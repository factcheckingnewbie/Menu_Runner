import { VerticalBox, HorizontalBox, Button, ListView } from "std-widgets.slint";

export struct MenuEntry {
    label: string,
    actions: [string],
    command-template: string,
}

export component MainWindow inherits Window {
    title: "Menu Runner";
    width: 400px;
    height: 500px;

    callback run_command(string, string);
    in property <[MenuEntry]> menu_items;

    VerticalBox {
        Text {
            text: "Menu Runner";
            font-size: 24px;
            horizontal-alignment: TextHorizontalAlignment.center;
        }

        Rectangle {
            height: 1px;
            background: #ccc;
        }

        for menu_item in menu_items: VerticalBox {
            Text {
                text: menu_item.label;
                font-size: 18px;
                horizontal-alignment: TextHorizontalAlignment.center;
                padding-top: 10px;
                padding-bottom: 5px;
            }

            HorizontalBox {
                alignment: LayoutAlignment.center;
                spacing: 5px;
                
                for action in menu_item.actions: Button {
                    text: action;
                    clicked => {
                        // Send both the command template and action to Rust
                        // so it can properly replace <Action> with the action
                        root.run_command(menu_item.command-template, action);
                    }
                }
            }

            Rectangle {
                height: 1px;
                background: #eee;
            }
        }
    }
}
